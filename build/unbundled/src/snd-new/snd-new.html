<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html"><link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="import" href="../../bower_components/paper-tabs/paper-tab.html"><link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html"><link rel="import" href="../../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../../bower_components/paper-card/paper-card.html"><link rel="import" href="../../bower_components/paper-input/paper-input.html"><link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html"><link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html"><link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html"><link rel="import" href="../../bower_components/paper-item/paper-item.html"><link rel="import" href="../../bower_components/paper-button/paper-button.html"><link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="../../bower_components/paper-toast/paper-toast.html"><link rel="import" href="../../bower_components/paper-fab/paper-fab.html"><link rel="import" href="../../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../snd-chip/snd-chip.html"><link rel="prefetch" href="../../bower_components/polymer/polymer-element.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/element-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/boot.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/case-map.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/style-gather.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/resolve-url.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-module.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-effects.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/path.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-accessors.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/async.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/template-stamp.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-if.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/templatize.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/mutable-data.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/debounce.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flush.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="prefetch" href="../../bower_components/paper-tabs/paper-tab.html"><link rel="prefetch" href="../../bower_components/polymer/polymer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/legacy-element-mixin.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/gesture-event-listeners.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/gestures.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/import-href.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/render-status.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/unresolved.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer.dom.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flattened-nodes-observer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/array-splice.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer-fn.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/class.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/templatizer-behavior.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-bind.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/array-selector.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/custom-style.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/mutable-data-behavior.html"><link rel="prefetch" href="../../bower_components/iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../../bower_components/iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../../bower_components/paper-ripple/paper-ripple.html"><link rel="prefetch" href="../../bower_components/paper-tabs/paper-tabs.html"><link rel="prefetch" href="../../bower_components/iron-icon/iron-icon.html"><link rel="prefetch" href="../../bower_components/iron-meta/iron-meta.html"><link rel="prefetch" href="../../bower_components/iron-menu-behavior/iron-menubar-behavior.html"><link rel="prefetch" href="../../bower_components/iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-selectable.html"><link rel="prefetch" href="../../bower_components/iron-selector/iron-selection.html"><link rel="prefetch" href="../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../../bower_components/paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../../bower_components/paper-styles/default-theme.html"><link rel="prefetch" href="../../bower_components/paper-styles/color.html"><link rel="prefetch" href="../../bower_components/paper-tabs/paper-tabs-icons.html"><link rel="prefetch" href="../../bower_components/iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../../bower_components/iron-pages/iron-pages.html"><link rel="prefetch" href="../../bower_components/paper-card/paper-card.html"><link rel="prefetch" href="../../bower_components/iron-image/iron-image.html"><link rel="prefetch" href="../../bower_components/paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../../bower_components/paper-styles/shadow.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input.html"><link rel="prefetch" href="../../bower_components/iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../../bower_components/iron-input/iron-input.html"><link rel="prefetch" href="../../bower_components/iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../../bower_components/iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input-behavior.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../../bower_components/paper-styles/typography.html"><link rel="prefetch" href="../../bower_components/font-roboto/roboto.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input-container.html"><link rel="prefetch" href="../../bower_components/paper-input/paper-input-error.html"><link rel="prefetch" href="../../bower_components/paper-checkbox/paper-checkbox.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../../bower_components/iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../../bower_components/paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../../bower_components/iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../../bower_components/iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../../bower_components/iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../../bower_components/neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../../bower_components/iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../../bower_components/neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../../bower_components/neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../../bower_components/neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../../bower_components/paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="../../bower_components/paper-listbox/paper-listbox.html"><link rel="prefetch" href="../../bower_components/paper-item/paper-item.html"><link rel="prefetch" href="../../bower_components/paper-item/paper-item-behavior.html"><link rel="prefetch" href="../../bower_components/paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../../bower_components/paper-button/paper-button.html"><link rel="prefetch" href="../../bower_components/paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../../bower_components/paper-dialog/paper-dialog.html"><link rel="prefetch" href="../../bower_components/paper-dialog-behavior/paper-dialog-behavior.html"><link rel="prefetch" href="../../bower_components/paper-dialog-behavior/paper-dialog-shared-styles.html"><link rel="prefetch" href="../../bower_components/paper-toast/paper-toast.html"><link rel="prefetch" href="../../bower_components/paper-fab/paper-fab.html"><link rel="prefetch" href="../../bower_components/iron-icons/iron-icons.html"><link rel="prefetch" href="../snd-chip/snd-chip.html"></head><body><dom-module id="snd-new"><template><style>:host{display:block;height:100%;width:100%;--paper-tabs-selection-bar-color:var(--secondary-color);--paper-fab-background:var(--secondary-color);--paper-fab-keyboard-focus-background:var(--focus-color);}paper-tabs{background-color:var(--primary-color);color:#FFF;}paper-card{margin-top:16px;width:100%;}paper-checkbox{margin-top:16px;margin-right:8px;}paper-button{margin-top:16px;margin:auto;}paper-fab{position:fixed;bottom:32px;right:32px;box-shadow:var(--paper-material-elevation-4_-_box-shadow);}paper-input,
            paper-dropdown-menu{width:100%;}paper-dialog{width:calc(100% - 80px);}paper-dialog .buttons{padding:8px;}snd-chip{margin:4px 0;}.paper-card-row{display:flex;flex-direction:row;align-items:center;}.primary-paper-button{background-color:var(--primary-color);color:#FFF;}.secondary-paper-button{color:var(--secondary-color);}.red-paper-button{color:#FF5252;}.add-button-container{display:flex;flex-direction:row;align-items:center;width:100%;padding:16px 0;}.dependency-section{padding:12px 0 8px 0;}.dependency-overlay:after{content:"&nbsp;";display:block;position:fixed;width:100%;height:100%;top:0;left:0;z-index:102;background-color:rgba(0,0,0,0.7);}@media (min-width: 426px){.basic-page{width:calc(100% - 16px);height:calc(100% - 16px);padding:8px;}.basic-card{width:50%;margin:8px 25%;}.status-page{display:flex;flex-direction:row;flex-wrap:wrap;align-content:flex-start;width:calc(100% - 16px);height:calc(100% - 16px);padding:8px;}.status-card{width:calc(50% - 16px);margin:8px;}}@media (min-width: 769px){.status-card{width:calc((100% / 3) - 16px);}.basic-card{width:calc(100% / 3);margin:8px calc(100% / 3);}}</style><paper-tabs scrollable="" hide-scroll-buttons="" fit-container="" selected="{{ tabSelected }}"><paper-tab>Basic</paper-tab><paper-tab>Status</paper-tab><paper-tab>Resources</paper-tab><paper-tab>Defenses</paper-tab><paper-tab>Skills</paper-tab></paper-tabs><iron-pages id="ironPages" selected="{{ tabSelected }}"><section class="basic-page"><paper-card class="basic-card" elevation="2"><div class="card-content"><paper-input always-float-label="" type="text" label="Name" value="{{ newSheet.name }}"></paper-input><paper-input always-float-label="" type="text" label="Class" value="{{ newSheet.job }}"></paper-input><paper-input always-float-label="" type="text" label="Race" value="{{ newSheet.race }}"></paper-input><paper-input always-float-label="" type="number" label="Level" value="{{ newSheet.level }}"></paper-input><paper-input always-float-label="" type="text" label="System" value="{{ newSheet.system }}"></paper-input><div class="paper-card-row"><paper-checkbox checked="{{ newSheet.hasMinimumStatusModifierValue }}"></paper-checkbox><paper-input always-float-label="" type="number" label="Minimum Status Value Modifier" value="{{ newSheet.minimumStatusModifierValue }}" disabled="{{ !newSheet.hasMinimumStatusModifierValue }}"></paper-input></div></div></paper-card></section><section class="status-page"><template is="dom-repeat" items="[[ newSheet.statusList ]]" as="status" index-as="statusIndex"><paper-card class="status-card" elevation="2"><div class="card-content"><paper-input always-float-label="" type="text" label="Name" value="{{ status.name }}"></paper-input><paper-input always-float-label="" type="number" label="Base Value" value="{{ status.baseValue }}"></paper-input><paper-input always-float-label="" type="number" label="Level Modifier" value="{{ status.levelModifier }}"></paper-input><section class="dependency-section"><template is="dom-repeat" items="[[ status.dependencyList ]]" as="dependency" index-as="dependencyIndex"><snd-chip on-click="_editStatusDependency" data-status-index$="[[ statusIndex ]]" data-status-location="statusList" data-dependency-index$="[[ dependencyIndex ]]">[[ _dependencyChipName(dependency.name, dependency.location) ]]</snd-chip></template></section><paper-button class="secondary-paper-button" on-tap="_addStatusDependency" data-status-index$="[[ statusIndex ]]" data-status-location="statusList">Add Dependency</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteStatus" data-status-index$="[[ statusIndex ]]" data-status-location="statusList">Delete Status</paper-button></div></paper-card></template><div class="add-button-container"><paper-button class="primary-paper-button" raised="" on-tap="_addStatus" data-status-location="statusList">Add Status</paper-button></div></section><section class="status-page"><template is="dom-repeat" items="[[ newSheet.resourcesList ]]" as="resouces" index-as="resourcesIndex"><paper-card class="status-card" elevation="2"><div class="card-content"><paper-input always-float-label="" type="text" label="Name" value="{{ resouces.name }}"></paper-input><paper-input always-float-label="" type="number" label="Base Value" value="{{ resouces.baseValue }}"></paper-input><paper-input always-float-label="" type="number" label="Level Modifier" value="{{ resouces.levelModifier }}"></paper-input><section class="dependency-section"><template is="dom-repeat" items="[[ resouces.dependencyList ]]" as="dependency" index-as="dependencyIndex"><snd-chip on-click="_editStatusDependency" data-status-index$="[[ resourcesIndex ]]" data-status-location="resourcesList" data-dependency-index$="[[ dependencyIndex ]]">[[ _dependencyChipName(dependency.name, dependency.location) ]]</snd-chip></template></section><paper-button class="secondary-paper-button" on-tap="_addStatusDependency" data-status-index$="[[ resourcesIndex ]]" data-status-location="resourcesList">Add Dependency</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteStatus" data-status-index$="[[ resourcesIndex ]]" data-status-location="resourcesList">Delete Resoruce</paper-button></div></paper-card></template><div class="add-button-container"><paper-button class="primary-paper-button" raised="" on-tap="_addStatus" data-status-location="resourcesList">Add Resource</paper-button></div></section><section class="status-page"><template is="dom-repeat" items="[[ newSheet.defensesList ]]" as="defenses" index-as="defensesIndex"><paper-card class="status-card" elevation="2"><div class="card-content"><paper-input always-float-label="" type="text" label="Name" value="{{ defenses.name }}"></paper-input><paper-input always-float-label="" type="number" label="Base Value" value="{{ defenses.baseValue }}"></paper-input><paper-input always-float-label="" type="number" label="Level Modifier" value="{{ defenses.levelModifier }}"></paper-input><section class="dependency-section"><template is="dom-repeat" items="[[ defenses.dependencyList ]]" as="dependency" index-as="dependencyIndex"><snd-chip on-click="_editStatusDependency" data-status-index$="[[ defensesIndex ]]" data-status-location="defensesList" data-dependency-index$="[[ dependencyIndex ]]">[[ _dependencyChipName(dependency.name, dependency.location) ]]</snd-chip></template></section><paper-button class="secondary-paper-button" on-tap="_addStatusDependency" data-status-index$="[[ defensesIndex ]]" data-status-location="defensesList">Add Dependency</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteStatus" data-status-index$="[[ defensesIndex ]]" data-status-location="defensesList">Delete Defense</paper-button></div></paper-card></template><div class="add-button-container"><paper-button class="primary-paper-button" raised="" on-tap="_addStatus" data-status-location="defensesList">Add Defense</paper-button></div></section><section class="status-page"><template is="dom-repeat" items="[[ newSheet.skillsList ]]" as="skills" index-as="skillsIndex"><paper-card class="status-card" elevation="2"><div class="card-content"><paper-input always-float-label="" type="text" label="Name" value="{{ skills.name }}"></paper-input><paper-input always-float-label="" type="number" label="Base Value" value="{{ skills.baseValue }}"></paper-input><paper-input always-float-label="" type="number" label="Level Modifier" value="{{ skills.levelModifier }}"></paper-input><section class="dependency-section"><template is="dom-repeat" items="[[ skills.dependencyList ]]" as="dependency" index-as="dependencyIndex"><snd-chip on-click="_editStatusDependency" data-status-index$="[[ skillsIndex ]]" data-status-location="skillsList" data-dependency-index$="[[ dependencyIndex ]]">[[ _dependencyChipName(dependency.name, dependency.location) ]]</snd-chip></template></section><paper-button class="secondary-paper-button" on-tap="_addStatusDependency" data-status-index$="[[ skillsIndex ]]" data-status-location="skillsList">Add Dependency</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteStatus" data-status-index$="[[ skillsIndex ]]" data-status-location="skillsList">Delete Skill</paper-button></div></paper-card></template><div class="add-button-container"><paper-button class="primary-paper-button" raised="" on-tap="_addStatus" data-status-location="skillsList">Add Skill</paper-button></div></section></iron-pages><paper-fab icon="save" elevation="4" on-tap="_newSheet"></paper-fab><paper-dialog id="dependencyDialog" opened="{{ dependencyDialogOpened }}"><div class="content"><paper-dropdown-menu label="Location"><paper-listbox class="dropdown-content" slot="dropdown-content" attr-for-selected="location" selected="{{ dependencyLocation }}"><paper-item location="statusList">Status</paper-item><paper-item location="resourcesList">Resources</paper-item><paper-item location="defensesList">Defenses</paper-item><paper-item location="skillsList">Skills</paper-item></paper-listbox></paper-dropdown-menu><paper-dropdown-menu label="Dependency"><paper-listbox id="dependencyList" class="dropdown-content" slot="dropdown-content" attr-for-selected="name" selected="{{ dependencyName }}"><template id="dependencyListOptions" is="dom-repeat" items="[[ newSheet.statusList ]]" as="attr" mutable-data=""><paper-item name="[[ attr.name ]]">[[ attr.name ]]</paper-item></template></paper-listbox></paper-dropdown-menu><paper-input id="dependencyDialogValue" always-float-label="" type="number" label="Value" value="{{ dependencyValue }}"></paper-input></div><div class="buttons"><paper-button id="dependencyDialogCancel" class="red-paper-button" on-tap="_cancel">Cancel</paper-button><paper-button id="dependencyDialogConfirm" class="secondary-paper-button" on-tap="_confirm" autofocus="">Confirm</paper-button></div></paper-dialog><paper-toast id="sndNewToast" duration="2000"></paper-toast></template><script>class SndNew extends Polymer.Element{static get is(){return'snd-new'}static get properties(){return{tabSelected:{type:Number,value:0},newSheet:{type:Object,value:new Sheet,notify:!0},dependencyChain:{type:Array},requestStatusDependencyLocation:{type:String},requestStatusDependencyName:{type:String},dependencyDialogOpened:{type:Boolean,value:!1},dependencyLocation:{type:String,value:'statusList'},dependencyName:{type:String},dependencyValue:{type:Number}}}static get observers(){return['_dependencyDialogOpenedChanged(dependencyDialogOpened)','_dependencyLocationChanged(dependencyLocation)','_dependencyNameChanged(dependencyName)','_dependencyValueChanged(dependencyValue)']}_dependencyDialogOpenedChanged(a){return a?this.$.ironPages.classList.add('dependency-overlay'):this.$.ironPages.classList.remove('dependency-overlay'),void this.$.dependencyListOptions.render()}_dependencyLocationChanged(a){return this.$.dependencyListOptions.items=this.newSheet[a],this.$.dependencyListOptions.render(),this.set('dependencyName',''),void this._dependencyValueDisabled()}_dependencyNameChanged(){return this._dependencyAddDisabled(),void this._dependencyValueDisabled()}_dependencyValueChanged(){return this._dependencyAddDisabled(),void this._dependencyValueDisabled()}_dependencyChipName(a,b){let c=a;return c+='statusList'==b?' on Status':'resourcesList'==b?' on Resources':'defensesList'==b?' on Defenses':' on Skills',c}_dependencyValueDisabled(){this.$.dependencyDialogValue.disabled='statusList'==this.dependencyLocation&&this.newSheet.hasMinimumStatusModifierValue}_dependencyAddDisabled(){this.$.dependencyDialogConfirm.disabled=this.dependencyLocation==this.requestStatusDependencyLocation&&this.dependencyName==this.requestStatusDependencyName||!this.dependencyName||(this.dependencyValue||this.newSheet.hasMinimumStatusModifierValue?!1:!0)}_addStatus(a){let b='newSheet.'+a.target.dataset.statusLocation;this.push(b,new Status)}_deleteStatus(a){let b=a.target.dataset.statusIndex,c='newSheet.'+a.target.dataset.statusLocation;this.splice(c,b,1)}_addStatusDependency(a){let b=a.target.dataset.statusIndex,c=a.target.dataset.statusLocation,e=this;return this.set('dependencyLocation','statusList'),this.set('dependencyName',''),this.set('dependencyValue',0),this.set('requestStatusDependencyLocation',c),this.set('requestStatusDependencyName',this.newSheet.statusList[b].name),this._dependencyValueDisabled(),this._dependencyAddDisabled(),this._cancel=()=>{e.set('dependencyLocation','statusList'),e.set('dependencyName',''),e.set('dependencyValue',0),e.$.dependencyDialog.close()},this._confirm=()=>{e.push('newSheet.'+c+'.'+b+'.dependencyList',new Dependency(e.dependencyLocation,e.dependencyName,e.dependencyValue)),e.set('dependencyLocation','statusList'),e.set('dependencyName',''),e.set('dependencyValue',0),e.$.dependencyDialog.close()},void this.$.dependencyDialog.open()}_editStatusDependency(a){let b=a.target.dataset.statusIndex,c=a.target.dataset.statusLocation,d=a.target.dataset.dependencyIndex,e=this.newSheet[c][b].dependencyList[d],g=this;return this.set('dependencyLocation',e.location),this.set('dependencyName',e.name),this.set('dependencyValue',e.modifier),this.set('requestStatusDependencyLocation',c),this.set('requestStatusDependencyName',this.newSheet.statusList[b].name),this._cancel=()=>{g.set('dependencyLocation',c),g.set('dependencyName',''),g.set('dependencyValue',0),g.$.dependencyDialog.close()},this._confirm=()=>{g.set('newSheet.'+c+'.'+b+'.dependencyList.'+d,new Dependency(g.dependencyLocation,g.dependencyName,g.dependencyValue)),g.$.dependencyDialog.close()},void this.$.dependencyDialog.open()}_newSheet(){if(!this.newSheet.name||!this.newSheet.job||!this.newSheet.race||!this.newSheet.level||!this.newSheet.system)return this.$.sndNewToast.text='Please, fill the Basic tab.',void(this.$.sndNewToast.opened=!0);const b=this;return this.set('dependencyChain',[]),parseInt(b._numberTypeCheck(b.newSheet.level)),this.newSheet.statusList.forEach(function(c){0===c.value&&(b.push('dependencyChain',{location:'statusList',status:c}),b._objectCalculation(c),b.dependencyChain=[])}),this.newSheet.resourcesList.forEach(function(c){0===c.value&&(b.push('dependencyChain',{location:'resourcesList',status:c}),b._objectCalculation(c),b.dependencyChain=[])}),this.newSheet.defensesList.forEach(function(c){0===c.value&&(b.push('dependencyChain',{location:'defensesList',status:c}),b._objectCalculation(c),b.dependencyChain=[])}),this.newSheet.skillsList.forEach(function(c){0===c.value&&(b.push('dependencyChain',{location:'skillsList',status:c}),b._objectCalculation(c),b.dependencyChain=[])}),console.log(this.newSheet),this.dispatchEvent(new CustomEvent('addNewSheet',{detail:{sheetData:b.newSheet},composed:!0})),this.set('tabSelected',0),void this.set('newSheet',new Sheet)}_objectCalculation(a){const b=this;return a.value=parseInt(parseInt(b._numberTypeCheck(a.baseValue))+parseInt(b._numberTypeCheck(b.newSheet.level))*parseFloat(b._numberTypeCheck(a.levelModifier))),console.log('Initial '+a.name+' Value: '+a.value),0<a.dependencyList.length&&b.dependencyChain.forEach(function(c){a.dependencyList.forEach(function(d){if(d.location==c.location&&d.name==c.status.name)throw b.$.sndNewToast.text='Please, very all dependencies.',b.$.sndNewToast.opened=!0,'Deadlock';else b.newSheet[d.location].forEach(function(e){e.name==d.name&&(0===e.value&&(b.push('dependencyChain',{location:d.location,status:e}),b._objectCalculation(e)),a.value='statusList'==d.location?b.newSheet.hasMinimumStatusModifierValue?parseInt(parseInt(b._numberTypeCheck(a.value))+b._returnStatusModifier(parseInt(b._numberTypeCheck(e.value)),parseFloat(b.newSheet.minimumStatusModifierValue))):parseInt(parseInt(b._numberTypeCheck(a.value))+parseInt(b._numberTypeCheck(e.value))*parseFloat(b._numberTypeCheck(d.modifier))):parseInt(parseInt(b._numberTypeCheck(a.value))+parseInt(b._numberTypeCheck(e.value))*parseFloat(b._numberTypeCheck(d.modifier))),console.log('Update '+a.name+' Value with '+e.name+' Value: '+a.value))})})}),void console.log('End '+a.name+' Value Calculation: '+a.value)}_numberTypeCheck(a){return a=a.toString().replace(',','.'),isNaN(parseInt(a))?'0':a}_returnStatusModifier(a,b){let c=this;return parseInt(c._numberTypeCheck(a))>=parseInt(c._numberTypeCheck(b))?parseInt((parseInt(c._numberTypeCheck(a))-parseInt(c._numberTypeCheck(b)))/2):parseInt((parseInt(c._numberTypeCheck(a))-parseInt(c._numberTypeCheck(b)))/2-0.5)}}class Sheet{constructor(){this.name='',this.job='',this.race='',this.level=1,this.system='',this.hasMinimumStatusModifierValue=!1,this.minimumStatusModifierValue=10,this.statusList=[new Status('Vitality')],this.resourcesList=[new Status('HP')],this.defensesList=[new Status('Armor')],this.skillsList=[new Status('Diplomacy')],this.persistBonusList=[],this.volatileBonusList=[],this.notesList=[],this.itemsList=[]}}class Status{constructor(a){this.name=a,this.value=0,this.baseValue=0,this.levelModifier=0,this.persistBonus=0,this.volatileBonus=0,this.dependencyList=[]}}class Dependency{constructor(a,b,c){this.location=a,this.name=b,this.modifier=c}}window.customElements.define(SndNew.is,SndNew);</script></dom-module></body></html>