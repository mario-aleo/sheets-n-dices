<html><head><link rel="prefetch" href="../snd-app/snd-app.html"></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="../snd-app/snd-app.html"><dom-module id="iron-autogrow-textarea" assetpath="../../bower_components/iron-autogrow-textarea/"><template><style>:host{display:inline-block;position:relative;width:400px;border:1px solid;padding:2px;-moz-appearance:textarea;-webkit-appearance:textarea;overflow:hidden;}.mirror-text{visibility:hidden;word-wrap:break-word;}.fit{@apply --layout-fit;}textarea{position:relative;outline:none;border:none;resize:none;background:inherit;color:inherit;width:100%;height:100%;font-size:inherit;font-family:inherit;line-height:inherit;text-align:inherit;@apply --iron-autogrow-textarea;}textarea::-webkit-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea::-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-ms-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}</style><div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div><div class="textarea-container fit"><textarea id="textarea" name$="[[name]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea></div></template></dom-module><script>Polymer({is:'iron-autogrow-textarea',behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:'_valueChanged',type:String,notify:!0},bindValue:{observer:'_bindValueChanged',type:String,notify:!0},rows:{type:Number,value:1,observer:'_updateCached'},maxRows:{type:Number,value:0,observer:'_updateCached'},autocomplete:{type:String,value:'off'},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number}},listeners:{input:'_onInput'},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){var a=navigator.userAgent.match(/iP(?:[oa]d|hone)/);a&&(this.$.textarea.style.marginLeft='-3px')},validate:function(){var a=this.$.textarea.validity.valid;return a&&(this.required&&''===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value))),this.invalid=!a,this.fire('iron-input-validate'),a},_bindValueChanged:function(a){this.value=a},_valueChanged:function(a){var b=this.textarea;b&&(b.value!==a&&(b.value=a||0===a?a:''),this.bindValue=a,this.$.mirror.innerHTML=this._valueForMirror())},_onInput:function(a){var b=Polymer.dom(a).path;this.value=b?b[0].value:a.target.value},_constrain:function(a){var b;for(a=a||[''],b=0<this.maxRows&&a.length>this.maxRows?a.slice(0,this.maxRows):a.slice(0);0<this.rows&&b.length<this.rows;)b.push('');return b.join('<br/>')+'&#160;'},_valueForMirror:function(){var a=this.textarea;if(a)return this.tokens=a&&a.value?a.value.replace(/&/gm,'&amp;').replace(/"/gm,'&quot;').replace(/'/gm,'&#39;').replace(/</gm,'&lt;').replace(/>/gm,'&gt;').split('\n'):[''],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)}});</script><dom-module id="paper-textarea" assetpath="../../bower_components/paper-input/"><template><style>:host{display:block;}:host([hidden]){display:none !important;}label{pointer-events:none;}</style><paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><label hidden$="[[!label]]" aria-hidden="true" for="input" slot="label">[[label]]</label><iron-autogrow-textarea id="input" class="paper-input-input" slot="input" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" bind-value="{{value}}" invalid="{{invalid}}" validator$="[[validator]]" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange"></iron-autogrow-textarea><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template></dom-module><script>Polymer({is:'paper-textarea',behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:'_ariaLabelledByChanged',type:String},_ariaDescribedBy:{observer:'_ariaDescribedByChanged',type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(a){this.$.input.textarea.setAttribute('aria-labelledby',a)},_ariaDescribedByChanged:function(a){this.$.input.textarea.setAttribute('aria-describedby',a)},get _focusableElement(){return this.$.input.textarea}});</script></div><dom-module id="snd-sheet"><template><style>:host{display:block;height:100%;width:100%;--paper-tabs-selection-bar-color:var(--secondary-color);--paper-fab-background:var(--secondary-color);--paper-fab-keyboard-focus-background:var(--focus-color);--paper-input-container-input:{max-height:96px;};}paper-tabs{background-color:var(--primary-color);color:#FFF;}paper-card{width:100%;margin-top:16px;}paper-fab{position:fixed;bottom:32px;right:32px;box-shadow:var(--paper-material-elevation-4_-_box-shadow);}paper-dialog{width:calc(100% - 80px);}paper-dialog .buttons{padding:8px;}paper-dialog .buttons paper-button{margin:auto;}snd-chip{margin:4px 0;}paper-dropdown-menu{width:100%;}.dices-page{display:flex;flex-direction:row;flex-wrap:wrap;}.dices-page paper-button{width:124px;height:48px;margin:calc(100%/6 - 48px/3) calc(100%/4 - 124px/2);}.status-card:last-child{margin-bottom:80px;}.effect-card:last-child{margin-bottom:32px;}.effect-card .effect-description{padding-bottom:0;}.effect-card .affects-list{padding-bottom:0;}.sheet-detail{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:16px;}.sheet-detail:first-child{margin-top:0;}.sheet-detail-name{font-weight:500;}.affect-add-content{display:flex;flex-direction:row;}.affects-list snd-chip{padding:8px 8px 8px 16px;}.affects-list snd-chip iron-icon{--iron-icon-width:18px;--iron-icon-height:18px;margin-left:8px;}.dialog-overlay:after{content:"&nbsp;";display:block;position:fixed;width:100%;height:100%;top:0;left:0;z-index:102;background-color:rgba(0,0,0,0.7);}.note-text{word-break:break-word;}.primary-paper-button{background-color:var(--primary-color);color:#FFF;}.secondary-paper-button{color:var(--secondary-color);}.red-paper-button{color:#FF5252;}.left-paper-fab{left:32px;right:0;}@media (min-width: 426px){paper-dialog{width:calc(60% - 80px);max-width:calc(60% - 80px);}}@media (min-width: 769px){paper-dialog{width:calc(60% - 80px);max-width:calc(60% - 80px);}}</style><paper-tabs scrollable="" hide-scroll-buttons="" fit-container="" selected="{{ tabSelected }}"><paper-tab>Summary</paper-tab><paper-tab>Effects</paper-tab><paper-tab>Inventory</paper-tab><paper-tab>Notes</paper-tab><paper-tab>Dices</paper-tab></paper-tabs><iron-pages id="ironPages" selected="{{ tabSelected }}"><section class="summary-page"><paper-card class="basic-card" heading="Basic" elevation="2"><div class="card-content"><div class="sheet-detail"><span class="sheet-detail-name">Name: </span><span class="sheet-detail-value">[[ sheetData.name ]]</span></div><div class="sheet-detail"><span class="sheet-detail-name">Class: </span><span class="sheet-detail-value">[[ sheetData.job ]]</span></div><div class="sheet-detail"><span class="sheet-detail-name">Race: </span><span class="sheet-detail-value">[[ sheetData.race ]]</span></div><div class="sheet-detail"><span class="sheet-detail-name">Level: </span><span class="sheet-detail-value">[[ sheetData.level ]]</span></div><div class="sheet-detail"><span class="sheet-detail-name">System: </span><span class="sheet-detail-value">[[ sheetData.system ]]</span></div></div></paper-card><paper-card class="status-card" heading="Status" elevation="2"><div class="card-content"><template is="dom-repeat" items="[[ sheetData.statusList ]]" as="status"><div class="sheet-detail"><span class="sheet-detail-name">[[ status.name ]] </span><span class="sheet-detail-value">[[ status.value ]]</span></div></template></div></paper-card><paper-card class="status-card" heading="Resources" elevation="2"><div class="card-content"><template is="dom-repeat" items="[[ sheetData.resourcesList ]]" as="resources"><div class="sheet-detail"><span class="sheet-detail-name">[[ resources.name ]] </span><span class="sheet-detail-value">[[ resources.value ]]</span></div></template></div></paper-card><paper-card class="status-card" heading="Defenses" elevation="2"><div class="card-content"><template is="dom-repeat" items="[[ sheetData.defensesList ]]" as="defenses"><div class="sheet-detail"><span class="sheet-detail-name">[[ defenses.name ]] </span><span class="sheet-detail-value">[[ defenses.value ]]</span></div></template></div></paper-card><paper-card class="status-card" heading="Skills" elevation="2"><div class="card-content"><template is="dom-repeat" items="[[ sheetData.skillsList ]]" as="skills"><div class="sheet-detail"><span class="sheet-detail-name">[[ skills.name ]] </span><span class="sheet-detail-value">[[ skills.value ]]</span></div></template></div></paper-card></section><section class="effects-page"><template is="dom-if" if="[[ !sheetData.effectsList ]]"><div><p>You don't have any effect</p><p>Brightside, you don't have any negative effect :)</p></div></template><template is="dom-repeat" items="[[ sheetData.effectsList ]]" as="effect" index-as="effectIndex"><paper-card class="effect-card" heading="[[ effect.name ]]" elevation="2"><template is="dom-if" if="[[ effect.description ]]"><div class="card-content effect-description">[[ effect.description ]]</div></template><div class="card-content affects-list"><template is="dom-repeat" items="[[ effect.affectsList ]]" as="affect" index-as="affectIndex"><snd-chip><div on-click="_editAffect" data-effect-index$="[[ effectIndex ]]" data-affect-index$="[[ affectIndex ]]">[[ _affectChipName(affect.value, affect.name, affect.location) ]]</div><iron-icon icon="clear" on-click="_deleteAffect" data-effect-index$="[[ effectIndex ]]" data-affect-index$="[[ affectIndex ]]"></iron-icon></snd-chip></template></div><div class="card-content"><paper-button class="secondary-paper-button" on-tap="_addAffect" data-effect-index$="[[ effectIndex ]]">Add Effect Bonus</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteEffect" data-effect-index$="[[ effectIndex ]]">Delete</paper-button><paper-button class="secondary-paper-button" on-tap="_editEffect" data-effect-index$="[[ effectIndex ]]" autofocus="">Edit</paper-button></div></paper-card></template><paper-fab icon="add" elevation="4" on-tap="_addEffect"></paper-fab></section><section class="inventory-page"><template is="dom-if" if="[[ !sheetData.itemsList ]]"><div><p>You don't have any item ):</p></div></template><template is="dom-repeat" items="[[ sheetData.itemsList ]]" as="item" index-as="itemIndex"><paper-card class="item-card" heading="[[ item.name ]]" elevation="2"><div class="card-content"><paper-checkbox on-tap="_activeItem" data-item-index$="[[ itemIndex ]]" checked="[[ item.active ]]">Use</paper-checkbox></div><template is="dom-if" if="[[ !item.equippable ]]"><div class="card-content item-description">Charges: [[ item.charges ]]</div></template><template is="dom-if" if="[[ item.description ]]"><div class="card-content item-description">[[ item.description ]]</div></template><div class="card-content affects-list"><template is="dom-repeat" items="[[ item.affectsList ]]" as="affect" index-as="affectIndex"><snd-chip><div on-click="_editAffect" data-item-index$="[[ itemIndex ]]" data-affect-index$="[[ affectIndex ]]">[[ _affectChipName(affect.value, affect.name, affect.location) ]]</div><iron-icon icon="clear" on-click="_deleteAffect" data-item-index$="[[ itemIndex ]]" data-affect-index$="[[ affectIndex ]]"></iron-icon></snd-chip></template></div><div class="card-content"><paper-button class="secondary-paper-button" on-tap="_addAffect" data-item-index$="[[ itemIndex ]]">Add Item Bonus</paper-button></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteItem" data-item-index$="[[ itemIndex ]]">Delete</paper-button><paper-button class="secondary-paper-button" on-tap="_editItem" data-item-index$="[[ itemIndex ]]" autofocus="">Edit</paper-button></div></paper-card></template><paper-fab icon="add" elevation="4" on-tap="_addItem"></paper-fab></section><section class="notes-page"><template is="dom-if" if="[[ !sheetData.notesList ]]"><div>You don't have any note :(</div></template><template is="dom-repeat" items="[[ sheetData.notesList ]]" as="note" index-as="noteIndex"><paper-card class="status-card" heading="[[ note.name ]]" elevation="2"><div class="card-content note-text"><p>[[ note.text ]]</p></div><div class="card-actions"><paper-button class="red-paper-button" on-tap="_deleteNote" data-note-index$="[[ noteIndex ]]">Delete</paper-button><paper-button class="secondary-paper-button" on-tap="_editNote" data-note-index$="[[ noteIndex ]]" data-note-name$="[[ note.name ]]" data-note-text$="[[ note.text ]]" autofocus="">Edit</paper-button></div></paper-card></template><paper-fab icon="add" elevation="4" on-tap="_addNote"></paper-fab></section><section class="dices-page"><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="20">Roll d20</paper-button><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="12">Roll d12</paper-button><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="10">Roll d10</paper-button><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="8">Roll d8</paper-button><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="6">Roll d6</paper-button><paper-button class="primary-paper-button" on-tap="_rollDice" data-dice-number="4">Roll d4</paper-button></section></iron-pages><paper-dialog id="effectDialog" no-cancel-on-esc-key="" no-cancel-on-outside-click=""><div class="content"><paper-input id="effectDialogName" always-float-label="" type="text" label="Name"></paper-input><paper-textarea id="effectDialogDescription" always-float-label="" type="text" label="Description" rows="5" max-rows="4"></paper-textarea></div><div class="buttons"><paper-button id="effectDialogCancel" class="red-paper-button" on-tap="_cancel">Cancel</paper-button><paper-button id="effectDialogConfirm" class="secondary-paper-button" on-tap="_confirm" autofocus="">Confirm</paper-button></div></paper-dialog><paper-dialog id="itemDialog" no-cancel-on-esc-key="" no-cancel-on-outside-click=""><div class="content"><paper-input id="itemDialogName" always-float-label="" type="text" label="Name"></paper-input><paper-textarea id="itemDialogDescription" always-float-label="" type="text" label="Description" rows="5" max-rows="4"></paper-textarea><paper-checkbox id="itemDialogEquippable" checked="{{ itemEquippable }}">Equippable</paper-checkbox><paper-input id="itemDialogCharges" always-float-label="" type="number" label="Charges" value="{{ itemCharge }}"></paper-input></div><div class="buttons"><paper-button id="itemDialogCancel" class="red-paper-button" on-tap="_cancel">Cancel</paper-button><paper-button id="itemDialogConfirm" class="secondary-paper-button" on-tap="_confirm" autofocus="">Confirm</paper-button></div></paper-dialog><paper-dialog id="noteDialog" no-cancel-on-esc-key="" no-cancel-on-outside-click=""><div class="content"><paper-input id="noteDialogName" always-float-label="" type="text" label="Name"></paper-input><paper-textarea id="noteDialogText" always-float-label="" type="text" label="Text" rows="5" max-rows="4"></paper-textarea></div><div class="buttons"><paper-button id="noteDialogCancel" class="red-paper-button" on-tap="_cancel">Cancel</paper-button><paper-button id="noteDialogConfirm" class="secondary-paper-button" on-tap="_confirm" autofocus="">Confirm</paper-button></div></paper-dialog><paper-dialog id="affectDialog" no-cancel-on-esc-key="" no-cancel-on-outside-click=""><div class="content"><paper-dropdown-menu label="Affect"><paper-listbox id="affectDialogStatus" slot="dropdown-content" attr-for-selected="affectItem"><template is="dom-repeat" items="[[ sheetData.statusList ]]" as="status"><paper-item affect-item="[[ _affectItemStringify('statusList', status.name) ]]">[[ status.name ]] on Status</paper-item></template><template is="dom-repeat" items="[[ sheetData.resourcesList ]]" as="status"><paper-item affect-item="[[ _affectItemStringify('resourcesList', status.name) ]]">[[ status.name ]] on Resources</paper-item></template><template is="dom-repeat" items="[[ sheetData.defensesList ]]" as="status"><paper-item affect-item="[[ _affectItemStringify('defensesList', status.name) ]]">[[ status.name ]] on Defenses</paper-item></template><template is="dom-repeat" items="[[ sheetData.skillsList ]]" as="status"><paper-item affect-item="[[ _affectItemStringify('skillsList', status.name) ]]">[[ status.name ]] on Skills</paper-item></template></paper-listbox></paper-dropdown-menu><paper-input id="affectDialogValue" always-float-label="" type="number" label="Value" value="{{ affectValue }}"></paper-input></div><div class="buttons"><paper-button id="affectDialogCancel" class="red-paper-button" on-tap="_cancel">Cancel</paper-button><paper-button id="affectDialogConfirm" class="secondary-paper-button" on-tap="_confirm" autofocus="">Confirm</paper-button></div></paper-dialog><paper-toast id="sndSheetToast" duration="2000"></paper-toast></template><script>class SndSheet extends Polymer.Element{static get is(){return'snd-sheet'}static get properties(){return{tabSelected:{type:Number,value:0},sheetData:{type:Object},itemEquippable:{type:Boolean},itemCharge:{type:Number},affectValue:{type:Number}}}static get observers(){return['_affectValueChanged(affectValue)','_itemEquippableChanged(itemEquippable)','_itemChargeChanged(itemCharge)']}_affectValueChanged(a){return a=parseFloat(this._numberTypeCheck(a)),void(this.$.affectDialogConfirm.disabled=a&&0!==a?!1:!0)}_itemEquippableChanged(a){this.$.itemDialogCharges.disabled=!!a}_itemChargeChanged(a){a=parseInt(this._numberTypeCheck(a)),this.$.itemDialogConfirm.disabled=!!(0>=a)}_affectChipName(a,b,c){let d='';return d='statusList'==c?'Status':'resourcesList'==c?'Resources':'defensesList'==c?'Defenses':'Skills',0<a?'+'+a+' '+b+' on '+d:a+' '+b+' on '+d}_affectItemStringify(a,b){return JSON.stringify({location:a,name:b})}_addEffect(){let a=this;return this.$.ironPages.classList.add('dialog-overlay'),this.$.effectDialogName.value='',this.$.effectDialogDescription.value='',this._cancel=()=>{a.$.effectDialogName.value='',a.$.effectDialogDescription.value='',a.$.ironPages.classList.remove('dialog-overlay'),a.$.effectDialog.close()},this._confirm=()=>{let c=a.$.effectDialogName.value,d=a.$.effectDialogDescription.value;this.sheetData.effectsList||this.set('sheetData.effectsList',[]),a.push('sheetData.effectsList',new Effect(c,d,[])),a.$.effectDialogName.value='',a.$.effectDialogDescription.value='',a.$.ironPages.classList.remove('dialog-overlay'),a.$.effectDialog.close()},void this.$.effectDialog.open()}_editEffect(){let a=this,b=event.target.dataset.effectIndex,c=this.sheetData.effectsList[b].name,d=this.sheetData.effectsList[b].description,e=this.sheetData.effectsList[b].affectsList;return this.$.ironPages.classList.add('dialog-overlay'),this.$.effectDialogName.value=c,this.$.effectDialogDescription.value=d,this._cancel=()=>{a.$.effectDialogName.value='',a.$.effectDialogDescription.value='',a.$.ironPages.classList.remove('dialog-overlay'),a.$.effectDialog.close()},this._confirm=()=>{let h=a.$.effectDialogName.value,i=a.$.effectDialogDescription.value;a.set('sheetData.effectsList.'+b,new Effect(h,i,e)),a.$.effectDialogName.value='',a.$.effectDialogDescription.value='',a.$.ironPages.classList.remove('dialog-overlay'),a.$.effectDialog.close()},void this.$.effectDialog.open()}_deleteEffect(){let a=event.target.dataset.effectIndex;this.splice('sheetData.effectsList',a,1)}_addItem(){let a=this;return this.$.ironPages.classList.add('dialog-overlay'),this.$.itemDialogName.value='',this.$.itemDialogDescription.value='',this.$.itemDialogEquippable.checked=!0,this.$.itemDialogCharges.value=0,this._cancel=()=>{a.$.itemDialogName.value='',a.$.itemDialogDescription.value='',a.$.itemDialogEquippable.checked=!0,a.$.itemDialogCharges.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.itemDialog.close()},this._confirm=()=>{let c=a.$.itemDialogName.value,d=a.$.itemDialogDescription.value,e=a.$.itemDialogEquippable.checked,f=a.$.itemDialogCharges.value;this.sheetData.itemsList||this.set('sheetData.itemsList',[]),a.push('sheetData.itemsList',new Item(c,d,e,f,!1,[])),a.$.itemDialogName.value='',a.$.itemDialogDescription.value='',a.$.itemDialogEquippable.checked=!0,a.$.itemDialogCharges.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.itemDialog.close()},void this.$.itemDialog.open()}_editItem(){let a=this,b=event.target.dataset.itemIndex,c=this.sheetData.itemsList[b].name,d=this.sheetData.itemsList[b].description,e=this.sheetData.itemsList[b].equippable,f=this.sheetData.itemsList[b].charges,g=this.sheetData.itemsList[b].active,h=this.sheetData.itemsList[b].affectsList;return this.$.ironPages.classList.add('dialog-overlay'),this.$.itemDialogName.value=c,this.$.itemDialogDescription.value=d,this.$.itemDialogEquippable.checked=e,this.$.itemDialogCharges.value=f,this._cancel=()=>{a.$.itemDialogName.value='',a.$.itemDialogDescription.value='',a.$.itemDialogEquippable.checked=!0,a.$.itemDialogCharges.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.itemDialog.close()},this._confirm=()=>{let k=a.$.itemDialogName.value,l=a.$.itemDialogDescription.value,m=a.$.itemDialogEquippable.checked,n=a.$.itemDialogCharges.value;a.set('sheetData.itemsList.'+b,new Item(k,l,m,n,g,h)),a.$.itemDialogName.value='',a.$.itemDialogDescription.value='',a.$.itemDialogEquippable.checked=!0,a.$.itemDialogCharges.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.itemDialog.close()},void this.$.itemDialog.open()}_deleteItem(){let a=event.target.dataset.itemIndex;this.splice('sheetData.itemsList',a,1)}_activeItem(){let a=this,b=event.target.dataset.itemIndex,c=!event.target.__data.checked,e='sheetData.itemsList.'+b,f=this.sheetData.itemsList[b];f.charges=parseInt(f.charges),f.equippable?this.set(e,new Item(f.name,f.description,f.equippable,f.charges,c,f.affectsList)):c?(f.charges--,this.set(e,new Item(f.name,f.description,f.equippable,f.charges,c,f.affectsList))):0==f.charges&&this.splice('sheetData.itemsList',b,1)}_addNote(){let b=this;return this.$.ironPages.classList.add('dialog-overlay'),this._cancel=()=>{b.$.noteDialogName.value='',b.$.noteDialogText.value='',b.$.noteDialog.close(),b.$.ironPages.classList.remove('dialog-overlay')},this._confirm=()=>{let d=b.$.noteDialogName.value,e=b.$.noteDialogText.value;b.sheetData.notesList||b.set('sheetData.notesList',[]),b.push('sheetData.notesList',new Note(d,e)),b.$.noteDialog.close(),b.$.ironPages.classList.remove('dialog-overlay')},void this.$.noteDialog.open()}_editNote(a){let b=this,c=a.target.dataset.noteName,d=a.target.dataset.noteText,e='sheetData.notesList.'+a.target.dataset.noteIndex;return this.$.ironPages.classList.add('dialog-overlay'),this.$.noteDialogName.value=c,this.$.noteDialogText.value=d,this._cancel=()=>{b.$.noteDialogName.value='',b.$.noteDialogText.value='',b.$.noteDialog.close(),b.$.ironPages.classList.remove('dialog-overlay')},this._confirm=()=>{let g=b.$.noteDialogName.value,h=b.$.noteDialogText.value;b.set(e,new Note(g,h)),b.$.noteDialog.close(),b.$.ironPages.classList.remove('dialog-overlay')},void this.$.noteDialog.open()}_deleteNote(a){let b=a.target.dataset.noteIndex;this.splice('sheetData.notesList',b,1)}_rollDice(){let a=event.target.dataset.diceNumber;this.$.sndSheetToast.close(),a=Math.floor(parseInt(a)),this.$.sndSheetToast.text='D'+a+' roll: '+(Math.floor(Math.random()*(a-1))+1),this.$.sndSheetToast.open()}_addAffect(){let a=this,b=event.target.dataset.effectIndex,c=event.target.dataset.itemIndex,d=b?'sheetData.effectsList.'+b+'.affectsList':'sheetData.itemsList.'+c+'.affectsList';return this.$.ironPages.classList.add('dialog-overlay'),this.$.affectDialogStatus.selected=a._affectItemStringify('statusList',a.sheetData.statusList[0].name),this.$.affectDialogValue.value=0,this._cancel=()=>{a.$.affectDialogStatus.selected=a._affectItemStringify('statusList',a.sheetData.statusList[0].name),a.$.affectDialogValue.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.affectDialog.close()},this._confirm=()=>{let f=JSON.parse(a.$.affectDialogStatus.selected),g=parseFloat(this._numberTypeCheck(a.$.affectDialogValue.value));b&&!this.sheetData.effectsList[b].affectsList?this.set(d,[]):c&&!this.sheetData.itemsList[c].affectsList&&this.set(d,[]),a.push(d,new Affect(f.location,f.name,g)),a.$.affectDialogStatus.selected=a._affectItemStringify('statusList',a.sheetData.statusList[0].name),a.$.affectDialogValue.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.affectDialog.close()},void this.$.affectDialog.open()}_editAffect(){let a=this,b=event.target.dataset.effectIndex,c=event.target.dataset.itemIndex,d=event.target.dataset.affectIndex,e=b?this.sheetData.effectsList[b].affectsList[d].location:this.sheetData.itemsList[c].affectsList[d].location,f=b?this.sheetData.effectsList[b].affectsList[d].name:this.sheetData.itemsList[c].affectsList[d].name,g=b?this.sheetData.effectsList[b].affectsList[d].value:this.sheetData.itemsList[c].affectsList[d].value,h=b?'sheetData.effectsList.'+b+'.affectsList.'+d:'sheetData.itemsList.'+c+'.affectsList.'+d;return this.$.ironPages.classList.add('dialog-overlay'),this.$.affectDialogStatus.selected=a._affectItemStringify(e,f),this.$.affectDialogValue.value=g,this._cancel=()=>{a.$.affectDialogStatus.selected=a._affectItemStringify('statusList',a.sheetData.statusList[0].name),a.$.affectDialogValue.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.affectDialog.close()},this._confirm=()=>{let j=JSON.parse(a.$.affectDialogStatus.selected),k=parseFloat(this._numberTypeCheck(a.$.affectDialogValue.value));a.set(h,new Affect(j.location,j.name,k)),a.$.affectDialogStatus.selected=a._affectItemStringify('statusList',a.sheetData.statusList[0].name),a.$.affectDialogValue.value=0,a.$.ironPages.classList.remove('dialog-overlay'),a.$.affectDialog.close()},void this.$.affectDialog.open()}_deleteAffect(){let a=this,b=event.target.dataset.affectIndex,c=event.target.dataset.effectIndex,d=event.target.dataset.itemIndex,e=c?'sheetData.effectsList.'+c+'.affectsList':'sheetData.itemsList.'+d+'.affectsList';this.splice(e,b,1)}_numberTypeCheck(a){return a=a.toString().replace(',','.'),isNaN(parseInt(a))?'0':a}}class Note{constructor(a,b){this.name=a,this.text=b}}class Item{constructor(a,b,c,d,e,f){this.name=a,this.description=b,this.equippable=c,this.charges=d,this.active=e,this.affectsList=f||[]}}class Effect{constructor(a,b,c){this.name=a,this.description=b,this.affectsList=c||[]}}class Affect{constructor(a,b,c){this.location=a,this.name=b,this.value=c}}window.customElements.define(SndSheet.is,SndSheet);</script></dom-module></body></html>